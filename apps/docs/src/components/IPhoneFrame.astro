---
// IPhoneFrame.astro (Tailwind CSS Version)
export interface Props {
  src: string;
  title?: string;
  width?: string;
  height?: string;
  className?: string;
}

const {
  src,
  title = "iPhone Demo",
  width = "100%",
  height = "auto",
  className = ""
} = Astro.props;
---

<div
  class={`max-w-sm mx-auto relative ${className}`}
  style={`width: ${width}; height: ${height}; filter: drop-shadow(0 20px 40px rgba(0,0,0,0.15));`}
>
  <div class="w-full bg-gradient-to-br from-gray-800 to-black dark:from-green-600 dark:to-green-800 rounded-[40px] p-2 relative shadow-2xl border-2 border-gray-600 dark:border-green-400" style="aspect-ratio: 375 / 812;">

    <!-- Physical buttons -->
    <div class="absolute -left-1 top-20 w-1 h-5 bg-gradient-to-r from-gray-500 to-gray-700 dark:from-green-400 dark:to-green-600 rounded-sm"></div>

    <div class="absolute -left-1 top-[120px]">
      <div class="w-1 h-8 bg-gradient-to-r from-gray-500 to-gray-700 dark:from-green-400 dark:to-green-600 rounded-sm mb-2"></div>
      <div class="w-1 h-12 bg-gradient-to-r from-gray-500 to-gray-700 dark:from-green-400 dark:to-green-600 rounded-sm"></div>
    </div>

    <div class="absolute -right-1 top-[140px] w-1 h-16 bg-gradient-to-l from-gray-500 to-gray-700 dark:from-green-400 dark:to-green-600 rounded-sm"></div>

    <!-- iPhone Screen -->
    <div class="w-full h-full bg-black dark:bg-zinc-900 rounded-[32px] relative overflow-hidden border dark:border-green-300">

      <!-- Notch (optional - uncomment if needed) -->
      <!-- <div class="absolute top-0 left-1/2 transform -translate-x-1/2 w-32 h-6 bg-black dark:bg-white rounded-b-2xl z-20"></div> -->

      <!-- Content iframe -->
      <iframe
        class="w-full h-full border-none rounded-[32px] bg-white relative z-10"
        src={src}
        title={title}
        allowfullscreen
        loading="lazy"
      ></iframe>

      <!-- Home indicator -->
      <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 w-32 h-1 bg-white/30 dark:bg-green-300/60 rounded-full z-20"></div>
    </div>
  </div>
</div>

<style>
  /* Custom responsive scaling untuk mobile devices */
  @media (max-width: 480px) {
    .max-w-sm {
      transform: scale(0.85);
    }
  }

  @media (max-width: 360px) {
    .max-w-sm {
      transform: scale(0.75);
    }
  }
</style>