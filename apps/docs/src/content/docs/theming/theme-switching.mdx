---
title: Theme Switching
description: Implement smooth, animated theme transitions with advanced switching techniques, user preferences, and performance optimizations in your React Native app.
sidebar:
  order: 5
---

import { Card, CardGrid } from '@astrojs/starlight/components';
import { Tabs, TabItem } from '@astrojs/starlight/components';
import { Code } from '@astrojs/starlight/components';
import { Badge } from '@astrojs/starlight/components';
import { Aside } from '@astrojs/starlight/components';

# Theme Switching

Implement smooth, user-friendly theme switching with animations, persistence, and advanced transition effects. RNC Theme provides powerful tools for creating seamless theme experiences.

## Overview

Theme switching in RNC Theme supports:

<CardGrid>
  <Card title="üåì Mode Switching" icon="moon">
    Switch between light, dark, and system modes with automatic detection.
  </Card>
  <Card title="üé® Preset Switching" icon="palette">
    Change between registered theme presets instantly.
  </Card>
  <Card title="‚ú® Smooth Animations" icon="star">
    Animated transitions with customizable duration and easing.
  </Card>
  <Card title="üíæ Persistence" icon="document">
    Automatic saving and restoration of user theme preferences.
  </Card>
  <Card title="üéØ Targeted Updates" icon="setting">
    Update specific theme properties without full theme replacement.
  </Card>
  <Card title="‚ö° Performance" icon="rocket">
    Optimized switching with minimal re-renders and smooth performance.
  </Card>
</CardGrid>

## Basic Theme Switching

### Mode Switching

```tsx
import { useTheme } from 'rnc-theme';

function ThemeModeToggle() {
  const { mode, setMode, isDark } = useTheme();

  const toggleMode = () => {
    setMode(isDark ? 'light' : 'dark');
  };

  return (
    <TouchableOpacity onPress={toggleMode} style={styles.toggle}>
      <Text>{isDark ? '‚òÄÔ∏è' : 'üåô'}</Text>
      <Text>{mode} mode</Text>
    </TouchableOpacity>
  );
}
```

### Preset Switching

```tsx
import { useTheme, themeRegistry } from 'rnc-theme';

function ThemePresetSelector() {
  const { activePreset, setActivePreset } = useTheme();
  const availableThemes = themeRegistry.list();

  return (
    <ScrollView horizontal showsHorizontalScrollIndicator={false}>
      {availableThemes.map(themeName => (
        <TouchableOpacity
          key={themeName}
          onPress={() => setActivePreset(themeName)}
          style={[
            styles.presetButton,
            activePreset === themeName && styles.activePreset
          ]}
        >
          <Text style={styles.presetText}>{themeName}</Text>
        </TouchableOpacity>
      ))}
    </ScrollView>
  );
}
```

## Advanced Switching Patterns

### Animated Theme Toggle

<Tabs>
  <TabItem label="Slide Animation">
    ```tsx
    import { useTheme } from 'rnc-theme';
    import Animated, {
      useSharedValue,
      useAnimatedStyle,
      withTiming,
      interpolate,
    } from 'react-native-reanimated';

    function AnimatedThemeToggle() {
      const { isDark, setMode } = useTheme();
      const animatedValue = useSharedValue(isDark ? 1 : 0);

      const toggleTheme = () => {
        const newMode = isDark ? 'light' : 'dark';
        animatedValue.value = withTiming(isDark ? 0 : 1, { duration: 300 });
        setMode(newMode);
      };

      const animatedStyle = useAnimatedStyle(() => {
        const translateX = interpolate(animatedValue.value, [0, 1], [0, 30]);
        return {
          transform: [{ translateX }],
        };
      });

      return (
        <TouchableOpacity onPress={toggleTheme} style={styles.toggleContainer}>
          <View style={styles.track}>
            <Animated.View style={[styles.thumb, animatedStyle]} />
          </View>
          <Text>{isDark ? 'Dark' : 'Light'}</Text>
        </TouchableOpacity>
      );
    }
    ```
  </TabItem>

  <TabItem label="Rotation Animation">
    ```tsx
    import Animated, {
      useSharedValue,
      useAnimatedStyle,
      withTiming,
      interpolate,
    } from 'react-native-reanimated';

    function RotatingThemeToggle() {
      const { isDark, setMode } = useTheme();
      const rotation = useSharedValue(isDark ? 180 : 0);

      const toggleTheme = () => {
        const newMode = isDark ? 'light' : 'dark';
        rotation.value = withTiming(isDark ? 0 : 180, { duration: 500 });
        setMode(newMode);
      };

      const animatedStyle = useAnimatedStyle(() => ({
        transform: [{ rotate: `${rotation.value}deg` }],
      }));

      return (
        <TouchableOpacity onPress={toggleTheme}>
          <Animated.View style={animatedStyle}>
            <Text style={styles.icon}>{isDark ? 'üåô' : '‚òÄÔ∏è'}</Text>
          </Animated.View>
        </TouchableOpacity>
      );
    }
    ```
  </TabItem>

  <TabItem label="Scale Animation">
    ```tsx
    import Animated, {
      useSharedValue,
      useAnimatedStyle,
      withSequence,
      withTiming,
    } from 'react-native-reanimated';

    function ScaleThemeToggle() {
      const { isDark, setMode } = useTheme();
      const scale = useSharedValue(1);

      const toggleTheme = () => {
        scale.value = withSequence(
          withTiming(0.8, { duration: 100 }),
          withTiming(1, { duration: 100 })
        );
        setMode(isDark ? 'light' : 'dark');
      };

      const animatedStyle = useAnimatedStyle(() => ({
        transform: [{ scale: scale.value }],
      }));

      return (
        <TouchableOpacity onPress={toggleTheme}>
          <Animated.View style={animatedStyle}>
            <View style={styles.toggleButton}>
              <Text>{isDark ? 'üåô' : '‚òÄÔ∏è'}</Text>
            </View>
          </Animated.View>
        </TouchableOpacity>
      );
    }
    ```
  </TabItem>
</Tabs>

### Theme Carousel

```tsx
import { useTheme, themeRegistry } from 'rnc-theme';
import { PanGestureHandler } from 'react-native-gesture-handler';
import Animated, {
  useSharedValue,
  useAnimatedGestureHandler,
  useAnimatedStyle,
  withSpring,
  runOnJS,
} from 'react-native-reanimated';

function ThemeCarousel() {
  const { activePreset, setActivePreset } = useTheme();
  const themes = themeRegistry.list();
  const currentIndex = themes.indexOf(activePreset || themes[0]);

  const translateX = useSharedValue(0);
  const [themeIndex, setThemeIndex] = useState(currentIndex);

  const gestureHandler = useAnimatedGestureHandler({
    onStart: (_, context) => {
      context.startX = translateX.value;
    },
    onActive: (event, context) => {
      translateX.value = context.startX + event.translationX;
    },
    onEnd: (event) => {
      const threshold = 50;
      if (event.translationX > threshold && themeIndex > 0) {
        // Swipe right - previous theme
        runOnJS(setThemeIndex)(themeIndex - 1);
        runOnJS(setActivePreset)(themes[themeIndex - 1]);
      } else if (event.translationX < -threshold && themeIndex < themes.length - 1) {
        // Swipe left - next theme
        runOnJS(setThemeIndex)(themeIndex + 1);
        runOnJS(setActivePreset)(themes[themeIndex + 1]);
      }
      translateX.value = withSpring(0);
    },
  });

  const animatedStyle = useAnimatedStyle(() => ({
    transform: [{ translateX: translateX.value }],
  }));

  return (
    <PanGestureHandler onGestureEvent={gestureHandler}>
      <Animated.View style={[styles.carousel, animatedStyle]}>
        <Text style={styles.themeName}>{themes[themeIndex]}</Text>
        <Text style={styles.instruction}>Swipe to change theme</Text>
      </Animated.View>
    </PanGestureHandler>
  );
}
```

## System Theme Detection

### Automatic System Theme

```tsx
import { useTheme } from 'rnc-theme';
import { useColorScheme } from 'react-native';

function SystemThemeHandler() {
  const { mode, setMode } = useTheme();
  const systemColorScheme = useColorScheme();

  useEffect(() => {
    if (mode === 'system') {
      // Theme will automatically follow system changes
      console.log('Following system theme:', systemColorScheme);
    }
  }, [mode, systemColorScheme]);

  return (
    <View>
      <Text>Current mode: {mode}</Text>
      <Text>System preference: {systemColorScheme}</Text>

      <Button onPress={() => setMode('system')}>
        Follow System
      </Button>
      <Button onPress={() => setMode('light')}>
        Force Light
      </Button>
      <Button onPress={() => setMode('dark')}>
        Force Dark
      </Button>
    </View>
  );
}
```

### Custom System Detection

```tsx
import { useTheme } from 'rnc-theme';
import { Appearance } from 'react-native';

function CustomSystemDetection() {
  const { setMode } = useTheme();

  useEffect(() => {
    const subscription = Appearance.addChangeListener(({ colorScheme }) => {
      console.log('System theme changed to:', colorScheme);
      setMode('system'); // This will use the new system preference
    });

    return () => subscription?.remove();
  }, [setMode]);

  const getCurrentSystemTheme = () => {
    return Appearance.getColorScheme();
  };

  return (
    <View>
      <Text>System theme: {getCurrentSystemTheme()}</Text>
      <Button onPress={() => setMode('system')}>
        Sync with System
      </Button>
    </View>
  );
}
```

## Theme Switching UI Components

### Segmented Control

```tsx
import { useTheme } from 'rnc-theme';

function ThemeModeSegmentedControl() {
  const { mode, setMode } = useTheme();

  const modes = [
    { key: 'light', label: 'Light', icon: '‚òÄÔ∏è' },
    { key: 'dark', label: 'Dark', icon: 'üåô' },
    { key: 'system', label: 'Auto', icon: '‚öôÔ∏è' },
  ];

  return (
    <View style={styles.segmentedControl}>
      {modes.map(({ key, label, icon }) => (
        <TouchableOpacity
          key={key}
          onPress={() => setMode(key as any)}
          style={[
            styles.segment,
            mode === key && styles.activeSegment
          ]}
        >
          <Text style={styles.segmentIcon}>{icon}</Text>
          <Text style={styles.segmentLabel}>{label}</Text>
        </TouchableOpacity>
      ))}
    </View>
  );
}
```

### Theme Grid Selector

```tsx
import { useTheme, themeRegistry } from 'rnc-theme';

function ThemeGridSelector() {
  const { activePreset, setActivePreset } = useTheme();
  const themes = themeRegistry.listDetailed();

  return (
    <FlatList
      data={themes}
      numColumns={3}
      renderItem={({ item }) => (
        <ThemePreviewTile
          theme={item}
          isActive={activePreset === item.name}
          onSelect={() => setActivePreset(item.name)}
        />
      )}
      keyExtractor={(item) => item.name}
    />
  );
}

function ThemePreviewTile({ theme, isActive, onSelect }) {
  const themeConfig = themeRegistry.get(theme.name);

  return (
    <TouchableOpacity onPress={onSelect} style={styles.themeTile}>
      <View style={[
        styles.previewContainer,
        { backgroundColor: themeConfig?.colors?.background }
      ]}>
        <View style={styles.colorRow}>
          <View style={[
            styles.colorDot,
            { backgroundColor: themeConfig?.colors?.primary }
          ]} />
          <View style={[
            styles.colorDot,
            { backgroundColor: themeConfig?.colors?.secondary }
          ]} />
          <View style={[
            styles.colorDot,
            { backgroundColor: themeConfig?.colors?.accent }
          ]} />
        </View>
        <View style={[
          styles.textPreview,
          { backgroundColor: themeConfig?.colors?.surface }
        ]}>
          <View style={[
            styles.textLine,
            { backgroundColor: themeConfig?.colors?.text }
          ]} />
          <View style={[
            styles.textLine,
            { backgroundColor: themeConfig?.colors?.textSecondary }
          ]} />
        </View>
      </View>
      <Text style={styles.themeName}>{theme.name}</Text>
      {isActive && (
        <View style={styles.activeIndicator}>
          <Text>‚úì</Text>
        </View>
      )}
    </TouchableOpacity>
  );
}
```

### Floating Action Button

```tsx
import { useTheme } from 'rnc-theme';
import Animated, {
  useSharedValue,
  useAnimatedStyle,
  withSpring,
  withTiming,
} from 'react-native-reanimated';

function FloatingThemeToggle() {
  const { isDark, setMode } = useTheme();
  const scale = useSharedValue(1);
  const rotation = useSharedValue(0);

  const toggleTheme = () => {
    // Animation feedback
    scale.value = withSpring(0.9, {}, () => {
      scale.value = withSpring(1);
    });

    rotation.value = withTiming(rotation.value + 180, { duration: 300 });

    // Switch theme
    setMode(isDark ? 'light' : 'dark');
  };

  const animatedStyle = useAnimatedStyle(() => ({
    transform: [
      { scale: scale.value },
      { rotate: `${rotation.value}deg` }
    ],
  }));

  return (
    <Animated.View style={[styles.fab, animatedStyle]}>
      <TouchableOpacity onPress={toggleTheme} style={styles.fabButton}>
        <Text style={styles.fabIcon}>{isDark ? '‚òÄÔ∏è' : 'üåô'}</Text>
      </TouchableOpacity>
    </Animated.View>
  );
}
```

## Advanced Theme Switching

### Conditional Theme Switching

```tsx
import { useTheme } from 'rnc-theme';

function ConditionalThemeSwitcher() {
  const { setMode, setActivePreset } = useTheme();
  const [userPreferences, setUserPreferences] = useState({
    autoNightMode: true,
    workHoursTheme: 'corporate',
    eveningTheme: 'neon',
  });

  useEffect(() => {
    const checkTimeBasedTheme = () => {
      const hour = new Date().getHours();

      if (userPreferences.autoNightMode) {
        if (hour >= 9 && hour <= 17) {
          // Work hours
          setActivePreset(userPreferences.workHoursTheme);
          setMode('light');
        } else {
          // Evening/night
          setActivePreset(userPreferences.eveningTheme);
          setMode('dark');
        }
      }
    };

    checkTimeBasedTheme();
    const interval = setInterval(checkTimeBasedTheme, 60000); // Check every minute

    return () => clearInterval(interval);
  }, [userPreferences, setMode, setActivePreset]);

  return (
    <View>
      <Switch
        value={userPreferences.autoNightMode}
        onValueChange={(value) =>
          setUserPreferences(prev => ({ ...prev, autoNightMode: value }))
        }
      />
      <Text>Auto night mode</Text>
    </View>
  );
}
```

### Gesture-Based Switching

```tsx
import { PanGestureHandler, State } from 'react-native-gesture-handler';
import { useTheme } from 'rnc-theme';

function GestureThemeSwitcher() {
  const { isDark, setMode } = useTheme();

  const onGestureEvent = (event) => {
    if (event.nativeEvent.state === State.END) {
      const { velocityY } = event.nativeEvent;

      if (velocityY > 500) {
        // Fast swipe down - dark mode
        setMode('dark');
      } else if (velocityY < -500) {
        // Fast swipe up - light mode
        setMode('light');
      }
    }
  };

  return (
    <PanGestureHandler onHandlerStateChange={onGestureEvent}>
      <View style={styles.gestureArea}>
        <Text>Swipe up for light theme</Text>
        <Text>Swipe down for dark theme</Text>
        <Text>Current: {isDark ? 'Dark' : 'Light'}</Text>
      </View>
    </PanGestureHandler>
  );
}
```

## Performance Optimization

### Debounced Theme Switching

```tsx
import { useTheme } from 'rnc-theme';
import { useDebouncedCallback } from 'use-debounce';

function DebouncedThemeSwitcher() {
  const { setActivePreset } = useTheme();

  const debouncedSetTheme = useDebouncedCallback(
    (themeName: string) => {
      setActivePreset(themeName);
    },
    300 // 300ms delay
  );

  return (
    <ScrollView>
      {themes.map(theme => (
        <TouchableOpacity
          key={theme}
          onPress={() => debouncedSetTheme(theme)}
        >
          <Text>{theme}</Text>
        </TouchableOpacity>
      ))}
    </ScrollView>
  );
}
```

### Optimized Re-renders

```tsx
import { useTheme } from 'rnc-theme';
import { memo } from 'react';

const OptimizedThemeComponent = memo(({ children }) => {
  const { theme } = useTheme();

  // Only re-render when specific theme properties change
  const memoizedStyles = useMemo(() => ({
    backgroundColor: theme.colors.background,
    color: theme.colors.text,
  }), [theme.colors.background, theme.colors.text]);

  return (
    <View style={memoizedStyles}>
      {children}
    </View>
  );
});
```

## Theme Switching Events

### Listening to Theme Changes

```tsx
import { useTheme } from 'rnc-theme';

function ThemeChangeListener() {
  const { theme, mode, activePreset } = useTheme();

  useEffect(() => {
    console.log('Theme changed:', {
      mode,
      preset: activePreset,
      primaryColor: theme.colors.primary,
    });

    // Analytics tracking
    analytics.track('theme_changed', {
      mode,
      preset: activePreset,
    });

    // Update status bar
    StatusBar.setBarStyle(
      mode === 'dark' ? 'light-content' : 'dark-content'
    );
  }, [theme, mode, activePreset]);

  return null; // This is just a listener component
}
```

### Custom Theme Events

```tsx
import { useTheme } from 'rnc-theme';
import { EventEmitter } from 'events';

const themeEvents = new EventEmitter();

function ThemeEventManager() {
  const { mode, activePreset } = useTheme();

  useEffect(() => {
    themeEvents.emit('themeChanged', { mode, preset: activePreset });
  }, [mode, activePreset]);

  return null;
}

// Listen to theme events elsewhere
themeEvents.on('themeChanged', ({ mode, preset }) => {
  console.log('Theme event:', mode, preset);
});
```

## Best Practices

<CardGrid>
  <Card title="üéØ User Control" icon="star">
    Always provide users with easy access to theme switching options.
  </Card>
  <Card title="üíæ Persistence" icon="document">
    Save user theme preferences and restore them on app launch.
  </Card>
  <Card title="‚ú® Smooth Transitions" icon="setting">
    Use animations to make theme switching feel polished and responsive.
  </Card>
  <Card title="‚ö° Performance" icon="rocket">
    Optimize theme switching to prevent lag and maintain smooth UX.
  </Card>
</CardGrid>

### Do's and Don'ts

<Tabs>
  <TabItem label="‚úÖ Do's">
    ```tsx
    // ‚úÖ Provide clear visual feedback
    const ThemeToggle = () => {
      const { isDark, setMode } = useTheme();

      return (
        <TouchableOpacity
          onPress={() => setMode(isDark ? 'light' : 'dark')}
          style={[styles.toggle, isDark && styles.darkToggle]}
        >
          <Text>{isDark ? '‚òÄÔ∏è Light' : 'üåô Dark'}</Text>
        </TouchableOpacity>
      );
    };

    // ‚úÖ Persist user preferences
    useEffect(() => {
      AsyncStorage.setItem('theme-mode', mode);
    }, [mode]);

    // ‚úÖ Use smooth animations
    const animatedStyle = useAnimatedStyle(() => ({
      transform: [{ scale: withSpring(isActive ? 1.1 : 1) }],
    }));
    ```
  </TabItem>

  <TabItem label="‚ùå Don'ts">
    ```tsx
    // ‚ùå Don't switch themes without user action
    useEffect(() => {
      // Bad: Automatic switching without user consent
      setMode('dark');
    }, []);

    // ‚ùå Don't ignore system preferences
    const ignoreSystemTheme = () => {
      setMode('light'); // Always light, ignoring user's system setting
    };

    // ‚ùå Don't make switching hard to find
    const HiddenThemeToggle = () => (
      <View style={{ opacity: 0.1 }}> {/* Too hard to see */}
        <Button onPress={toggleTheme}>Theme</Button>
      </View>
    );
    ```
  </TabItem>
</Tabs>

<Aside type="tip" title="Accessibility">
  Ensure theme switching controls are accessible with proper labels and support for screen readers.
</Aside>

<Aside type="note" title="System Integration">
  Consider following platform conventions for theme switching (iOS Settings app style, Android Material You).
</Aside>

## Troubleshooting

### Common Issues

<Tabs>
  <TabItem label="Slow Switching">
    **Problem:** Theme switching feels laggy

    **Solutions:**
    ```tsx
    // Use InteractionManager for heavy operations
    import { InteractionManager } from 'react-native';

    const switchTheme = (newTheme) => {
      InteractionManager.runAfterInteractions(() => {
        setActivePreset(newTheme);
      });
    };

    // Optimize with useMemo
    const styles = useMemo(() =>
      createStyles(theme), [theme.colors.primary, theme.colors.background]
    );
    ```
  </TabItem>

  <TabItem label="Persistence Issues">
    **Problem:** Theme preference not saved

    **Solutions:**
    ```tsx
    // Check AsyncStorage permissions
    import AsyncStorage from '@react-native-async-storage/async-storage';

    const saveTheme = async (mode) => {
      try {
        await AsyncStorage.setItem('theme-mode', mode);
      } catch (error) {
        console.error('Failed to save theme:', error);
      }
    };

    // Enable persistence in provider
    <RNCProvider persistTheme={true}>
      {/* App content */}
    </RNCProvider>
    ```
  </TabItem>

  <TabItem label="Animation Glitches">
    **Problem:** Animations don't work smoothly

    **Solutions:**
    ```tsx
    // Use proper timing functions
    const animatedValue = withTiming(targetValue, {
      duration: 300,
      easing: Easing.bezier(0.25, 0.1, 0.25, 1),
    });

    // Avoid layout animations during theme switch
    LayoutAnimation.configureNext({
      duration: 0, // Disable during theme change
    });
    ```
  </TabItem>
</Tabs>

## Next Steps

<CardGrid>
  <Card title="Component Integration" icon="puzzle">
    Learn how to apply theme switching to your components.
    [Component Guide ‚Üí](/components/overview)
  </Card>
  <Card title="Hooks Reference" icon="code">
    Master all theme-related hooks for advanced switching.
    [Hooks Documentation ‚Üí](/hooks/overview)
  </Card>
  <Card title="Custom Themes" icon="palette">
    Create custom themes that work perfectly with switching.
    [Custom Theme Guide ‚Üí](/theming/custom-theme)
  </Card>
  <Card title="Performance Tips" icon="rocket">
    Optimize your app for smooth theme switching.
    [Setup Guide ‚Üí](/getting-started/setup-guide)
  </Card>
</CardGrid>